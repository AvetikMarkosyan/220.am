---
import Title from "../components/Title.astro";
import img1 from "@/assets/worker_2_worker_1.png";
import img2 from "@/assets/worker_2_worker_4.png";
import img3 from "@/assets/worker_2_worker_4_drowing.png";
import img4 from "@/assets/worker_2.png";
import img5 from "@/assets/group.png";
import img6 from "@/assets/industrial_building_maintenance.jpeg";
import img7 from "@/assets/worker_1.png";
import img8 from "@/assets/worker_2_industry.png";
import img9 from "@/assets/group_movie.png";
import img10 from "@/assets/hero_worker_3.png";
---

<section id="gallery" class="w-[90%] mx-auto my-20 text-center scroll-mt-[95px]">
  <Title subTitle="Gallery" title="220.am Photos" />

  <!-- ✅ First row of images -->
  <div
    id="gallery-grid"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mt-10"
  >
    {[img1, img2, img3, img4, img5, img10].map((img, i) => (
      <div
        class="relative overflow-hidden rounded-lg shadow-md cursor-pointer group"
        onclick={`openModal('${img.src}')`}
      >
        <img
          src={img.src}
          alt={`Gallery image ${i + 1}`}
          class="w-full h-auto max-h-[300px] object-cover transition-transform duration-300 group-hover:scale-105"
          loading="lazy"
        />
      </div>
    ))}
  </div>

  <!-- ✅ Hidden extra images -->
  <div
    id="more-photos"
    class="hidden grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mt-6 animate-fadeIn"
  >
    {[img6, img7, img8, img9].map((img, i) => (
      <div
        class="relative overflow-hidden rounded-lg shadow-md cursor-pointer group"
        onclick={`openModal('${img.src}')`}
      >
        <img
          src={img.src}
          alt={`More photo ${i + 6}`}
          class="w-full h-auto max-h-[300px] object-cover transition-transform duration-300 group-hover:scale-105"
          loading="lazy"
        />
      </div>
    ))}
  </div>

  <!-- ✅ Button -->
  <button
    id="see-more-btn"
    class="mt-8 bg-[#212EA0] text-white px-6 py-2 rounded-full hover:bg-[#1a227e] transition"
    onclick="toggleMorePhotos()"
  >
    See more photos
  </button>

  <!-- ✅ Modal for zoom -->
  <div
    id="image-modal"
    class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50 px-2 sm:px-0"
    onclick="closeModal()"
  >
    <img
      id="modal-img"
      src=""
      alt="Zoomed image"
      class="max-h-[85vh] max-w-full sm:max-w-[90%] rounded-lg shadow-xl transition-transform duration-300"
    />
  </div>

  <!-- ✅ Inline Script -->
  <script is:inline>
    function toggleMorePhotos() {
      const section = document.getElementById("more-photos");
      const btn = document.getElementById("see-more-btn");

      if (section.classList.contains("hidden")) {
        section.classList.remove("hidden");
        btn.textContent = "Show less";
      } else {
        section.classList.add("hidden");
        btn.textContent = "See more photos";
      }
    }

    function openModal(src) {
      const modal = document.getElementById("image-modal");
      const modalImg = document.getElementById("modal-img");
      modalImg.src = src;
      modal.classList.remove("hidden");
      document.body.style.overflow = "hidden"; // prevent scroll behind modal
    }

    function closeModal() {
      const modal = document.getElementById("image-modal");
      modal.classList.add("hidden");
      document.body.style.overflow = ""; // restore scroll
    }
  </script>

  <!-- ✅ Animation -->
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn {
      animation: fadeIn 0.4s ease-in-out;
    }
  </style>
</section>
